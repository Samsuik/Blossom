From d5e96a824f53caa9557d13eb20d33afcc1c599a7 Mon Sep 17 00:00:00 2001
From: Samsuik <40902469+Samsuik@users.noreply.github.com>
Date: Tue, 18 Jul 2023 20:20:39 +0100
Subject: [PATCH] Waterproof Redstone


diff --git a/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java b/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java
index 4cae11530..0ecf79a85 100644
--- a/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java
+++ b/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java
@@ -545,4 +545,9 @@ public class BlossomConfig {
         lavaObsidianGeneration = getBoolean("fluids.lava.create-obsidian", true);
     }
 
+    public static boolean waterProofRedstone;
+    private static void WaterProofRedstone() {
+        waterProofRedstone = getBoolean("fluids.water-proof-redstone", true);
+    }
+
 }
diff --git a/src/main/java/net/minecraft/server/BlockFlowing.java b/src/main/java/net/minecraft/server/BlockFlowing.java
index 2948ec77c..3549fd814 100644
--- a/src/main/java/net/minecraft/server/BlockFlowing.java
+++ b/src/main/java/net/minecraft/server/BlockFlowing.java
@@ -235,6 +235,12 @@ public class BlockFlowing extends BlockFluids {
     }
 
     private boolean g(World world, BlockPosition blockposition, IBlockData iblockdata) {
+        // Blossom start
+        if (me.samsuik.blossom.configuration.BlossomConfig.waterProofRedstone) {
+            Block block = iblockdata.getBlock();
+            return !(block == Blocks.AIR || block instanceof BlockFluids);
+        }
+        // Blossom end
         Block block = world.getType(blockposition).getBlock();
 
         return !(block instanceof BlockDoor) && block != Blocks.STANDING_SIGN && block != Blocks.LADDER && block != Blocks.REEDS ? (block.material == Material.PORTAL ? true : block.material.isSolid()) : true;
-- 
2.50.1

