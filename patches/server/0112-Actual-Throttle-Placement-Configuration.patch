From 2e4881c7da7ec711c617c71f080522c1dfcd7de5 Mon Sep 17 00:00:00 2001
From: Samsuik <40902469+Samsuik@users.noreply.github.com>
Date: Tue, 18 Jul 2023 23:32:01 +0100
Subject: [PATCH] Actual Throttle Placement Configuration

smh, paper

diff --git a/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java b/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java
index 59c669c99..8b102b9bd 100644
--- a/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java
+++ b/src/main/java/me/samsuik/blossom/configuration/BlossomConfig.java
@@ -543,4 +543,9 @@ public class BlossomConfig {
         chunkLoadingPlayersPerThread = getInt("chunk.loading.players-per-thread", 50);
     }
 
+    public static boolean throttlePlacement;
+    private static void ThrottlePlacement() {
+        throttlePlacement = getBoolean("player.throttle-block-placement", false);
+    }
+
 }
diff --git a/src/main/java/net/minecraft/server/PlayerConnection.java b/src/main/java/net/minecraft/server/PlayerConnection.java
index 190c29c69..64c1a0d0e 100644
--- a/src/main/java/net/minecraft/server/PlayerConnection.java
+++ b/src/main/java/net/minecraft/server/PlayerConnection.java
@@ -965,6 +965,11 @@ public class PlayerConnection implements PacketListenerPlayIn, IUpdatePlayerList
             this.lastInteractedSlot = this.player.inventory.itemInHandIndex;
         }
         // Blossom end
+        // Blossom start
+        if (!me.samsuik.blossom.configuration.BlossomConfig.throttlePlacement && itemstack != null && !itemstack.hasTag()) {
+            lastPlace = -1;
+        }
+        // Blossom end
 
         boolean flag = false;
         BlockPosition blockposition = packetplayinblockplace.a();
-- 
2.40.0.windows.1

